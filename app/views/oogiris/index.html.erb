<div class="mb-2 card col-sm-6 mx-auto">
  <div class="card-body small">
    <div class="text-center mb-2 text-dark"><%= "お題" %></div>
    <div class="text-dark text-center table-secondary p-2"><%= @field.text_theme %></div>
  </div>
</div>

<div class="col-sm-6 mx-auto small">
  <% @oogiris.each do |oogiri| %>
    <div class="d-flex align-items-center p-1 shadow-sm border my-2">
      <div class="d-flex text-nowrap align-items-center">
        <% if oogiri.get_rank <= 3 %>
          <i class="fa-solid fa-fire-flame-curved mr-2 text-danger"></i>
        <% elsif oogiri.get_rank > 3 && oogiri.point < 0 %>
          <i class="fa-solid fa-skull mr-2 text-dark small"></i>
        <% else %>
          <i class="fa-solid fa-circle-dot mr-2 text-success small"></i>
        <% end %>
        <div class="mr-2"><%= "#{oogiri.get_rank}位" %></div>
        <% @comments.each do |comment| %>
          <% if comment.oogiri_id == oogiri.id %>
            <i class="fa-solid fa-comment mr-2"></i>
          <% else %>
            <i class="fa-solid fa-comment-slash mr-2"></i>
          <% end %>
        <% end %>
        <div><%= "#{oogiri.point}点" %></div>
      </div>
      <div class="ml-3 container-fluid">
        <div class="d-flex small align-top row">
          <%= link_to("/fields/#{oogiri.field.id}/oogiri/#{oogiri.id}/votes", target: :_blank, rel: "noopener noreferrer") do %>
            <div class="d-flex small mr-1">
              <% [3, 2, 1, 0, -2].each do |v| %>
                <div class="bg-white border mr-1 text-dark px-1"><%= "#{oogiri.votes.where(vote_point: v).length}" %></div>
              <% end %>
            </div>
          <% end %>
          <%= link_to oogiri.user.name, "#", class: "text-left small text-secondary" %>
        </div>
        <%= link_to(field_oogiri_path(oogiri.field, oogiri), target: :_blank, rel: "noopener noreferrer") do %>
          <div class="p-1 table-secondary my-2 row text-dark"><%= oogiri.content %></div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>

<div class="col-sm-6 mx-auto">
  <div class="card-body p-2 shadow-sm border my-2 small text-muted">
    <div class="text-center mb-2 text-dark"><%= "投票者一覧" %></div>
    <div class="table-secondary p-2">
      <% @oogiris.each do |oogiri| %>
        <%= link_to "#{oogiri.user.name}", "#", class: "text-muted" %><%= " ," %>
      <% end %>
      <hr class="my-1">
      <div class="text-center"><%= "#{@oogiris.length}人" %></div>
    </div>
  </div>
</div>
